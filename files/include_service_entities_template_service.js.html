<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>include\service\entities\template_service.js - PencilBlue</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="../assets/favicon.png">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="http://pencilblue.org/img/pb_logo.png" title="PencilBlue"></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 0.1.3</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="../classes/AdminNavigation.html">AdminNavigation</a></li>
            
                <li><a href="../classes/AdminSubnavService.html">AdminSubnavService</a></li>
            
                <li><a href="../classes/ArticleService.html">ArticleService</a></li>
            
                <li><a href="../classes/CacheEntityService.html">CacheEntityService</a></li>
            
                <li><a href="../classes/CacheFactory.html">CacheFactory</a></li>
            
                <li><a href="../classes/ClientJS.html">ClientJS</a></li>
            
                <li><a href="../classes/CommentService.html">CommentService</a></li>
            
                <li><a href="../classes/ContentService.html">ContentService</a></li>
            
                <li><a href="../classes/DAO.html">DAO</a></li>
            
                <li><a href="../classes/DBEntityService.html">DBEntityService</a></li>
            
                <li><a href="../classes/DBManager.html">DBManager</a></li>
            
                <li><a href="../classes/DocumentCreator.html">DocumentCreator</a></li>
            
                <li><a href="../classes/EmailService.html">EmailService</a></li>
            
                <li><a href="../classes/FSEntityService.html">FSEntityService</a></li>
            
                <li><a href="../classes/JSONFSEntityService.html">JSONFSEntityService</a></li>
            
                <li><a href="../classes/Localization.html">Localization</a></li>
            
                <li><a href="../classes/MediaLoader.html">MediaLoader</a></li>
            
                <li><a href="../classes/MediaService.html">MediaService</a></li>
            
                <li><a href="../classes/MemoryEntityService.html">MemoryEntityService</a></li>
            
                <li><a href="../classes/MongoRegistrationProvider.html">MongoRegistrationProvider</a></li>
            
                <li><a href="../classes/MongoSessionStore.html">MongoSessionStore</a></li>
            
                <li><a href="../classes/PBError.html">PBError</a></li>
            
                <li><a href="../classes/PencilBlue.html">PencilBlue</a></li>
            
                <li><a href="../classes/PluginService.html">PluginService</a></li>
            
                <li><a href="../classes/ReadOnlySimpleLayeredService.html">ReadOnlySimpleLayeredService</a></li>
            
                <li><a href="../classes/RedisRegistrationProvider.html">RedisRegistrationProvider</a></li>
            
                <li><a href="../classes/RedisSessionStore.html">RedisSessionStore</a></li>
            
                <li><a href="../classes/SecurityService.html">SecurityService</a></li>
            
                <li><a href="../classes/ServerRegistration.html">ServerRegistration</a></li>
            
                <li><a href="../classes/SessionHandler.html">SessionHandler</a></li>
            
                <li><a href="../classes/SimpleLayeredService.html">SimpleLayeredService</a></li>
            
                <li><a href="../classes/TemplateService.html">TemplateService</a></li>
            
                <li><a href="../classes/TopMenuService.html">TopMenuService</a></li>
            
                <li><a href="../classes/UrlService.html">UrlService</a></li>
            
                <li><a href="../classes/UserService.html">UserService</a></li>
            
                <li><a href="../classes/Util.html">Util</a></li>
            
                <li><a href="../classes/ValidationService.html">ValidationService</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
                <li><a href="../modules/Admin.html">Admin</a></li>
            
                <li><a href="../modules/Database.html">Database</a></li>
            
                <li><a href="../modules/Entities.html">Entities</a></li>
            
                <li><a href="../modules/ErrorSuccess.html">ErrorSuccess</a></li>
            
                <li><a href="../modules/Model.html">Model</a></li>
            
                <li><a href="../modules/Security.html">Security</a></li>
            
                <li><a href="../modules/Services.html">Services</a></li>
            
                <li><a href="../modules/Session.html">Session</a></li>
            
                <li><a href="../modules/Storage.html">Storage</a></li>
            
                <li><a href="../modules/Theme.html">Theme</a></li>
            
                <li><a href="../modules/Validation.html">Validation</a></li>
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: include\service\entities\template_service.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
/*
    Copyright (C) 2014  PencilBlue, LLC

    This program is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;.
*/

//dependencies
var HtmlEncoder = require(&#x27;htmlencode&#x27;);

/**
 * A templating engine that provides the ability to read in file snippets and
 * call back for data based on the flags in the template file.  The instance
 * can be provided a Localization instance which will be used to perform
 * translations for localization flags are encountered.  Flags are marked in
 * html files by the pattern ^xzy^.  The values provided here are not HTML
 * encoded.  Any reserved characters must be manually encoded by any flag
 * call backs.
 *
 * @class TemplateService
 * @constructor
 * @module Services
 * @submodule Entities
 * @param {Object} [localizationService] The localization service object
 */
function TemplateService(localizationService){
	this.localCallbacks      = {
		year: (new Date()).getFullYear()
	};

	this.localizationService = null;
	if (localizationService) {
		this.localizationService = localizationService;
	}

	//set the prioritized template as not specified
	this.theme = null;

	//ensure template loader is initialized
	if (TEMPLATE_LOADER === null) {
		var objType  = &#x27;template&#x27;;
		var services = [];

		//add in-memory service
		if (pb.config.templates.use_memory){
			services.push(new pb.MemoryEntityService(objType));
		}

		//add cache service
		if (pb.config.templates.use_cache) {
			services.push(new pb.CacheEntityService(objType));
		}

		//always add fs service
		services.push(new pb.FSEntityService(objType));

		TEMPLATE_LOADER = new pb.SimpleLayeredService(services, &#x27;TemplateService&#x27;);
	}

    /**
     * Indicates if the data from the registered flags
     * should be reprocessed.  The value is FALSE by default.
     * @property reprocess
     * @type {Boolean}
     */
    this.reprocess = false;
}

//constants
var TEMPLATE_PREFIX         = &#x27;tmp_&#x27;;
var TEMPLATE_PREFIX_LEN     = TEMPLATE_PREFIX.length;
var LOCALIZATION_PREFIX     = &#x27;loc_&#x27;;
var LOCALIZATION_PREFIX_LEN = LOCALIZATION_PREFIX.length;
var SYSTEM_PREFIX           = &#x27;system_&#x27;;
var SYSTEM_PREFIX_LEN       = SYSTEM_PREFIX.length;

var TEMPLATE_LOADER = null;

/**
 * A container that provides the mapping for global call backs.  These should
 * only be added to at the start of the application or on plugin install/update.
 *
 * @private
 * @property
 */
var GLOBAL_CALLBACKS = {
	site_root: pb.config.siteRoot,
	site_name: pb.config.siteName,
	site_logo: function(flag, callback) {
		pb.settings.get(&#x27;site_logo&#x27;, function(err, logo) {
			callback(null, logo ? logo : &#x27;/img/pb_logo.png&#x27;);
		});
	},
	site_menu_logo: &#x27;/img/logo_menu.png&#x27;,
	site_icon: function(flag, callback) {
		pb.plugins.getActiveIcon(callback);
	}
};

/**
 * Sets the prioritized theme to use when loading templates
 *
 * @method setTheme
 * @param {string} theme The name of the theme.
 */
TemplateService.prototype.setTheme = function(theme) {
	this.theme = theme;
};

/**
 * Retrieves the prioratized theme
 *
 * @method getTheme
 * @return {string} The prioritized theme to use when loading templates
 */
TemplateService.prototype.getTheme = function() {
	return this.theme;
};

/**
 * Retrieves the raw template based on a priority.  The path to the template is
 * derived from the specified relative path and the following order of
 * directories:
 * &lt;ol&gt;
 * &lt;li&gt;The theme provided by &quot;getTheme&quot; if not null&lt;/li&gt;
 * &lt;li&gt;The globally set active_theme&lt;/li&gt;
 * &lt;li&gt;Iterates over the list of active plugins looking for the template&lt;/li&gt;
 * &lt;li&gt;The system template directory&lt;/li&gt;
 * &lt;/ol&gt;
 *
 * @method getTemplateContentsByPriority
 * @param {string} relativePath
 * @param {function} cb Callback function
 */
TemplateService.prototype.getTemplateContentsByPriority = function(relativePath, cb) {

	//build set of paths to search through
	var hintedTheme   = this.getTheme();
	var paths         = [];
	if (hintedTheme) {
		paths.push(TemplateService.getCustomPath(this.getTheme(), relativePath));
	}
	pb.settings.get(&#x27;active_theme&#x27;, function(err, activeTheme){
		if (activeTheme !== null) {
			paths.push(TemplateService.getCustomPath(activeTheme, relativePath));
		}

		var activePlugins = pb.plugins.getActivePluginNames();
		for (var i = 0; i &lt; activePlugins.length; i++) {
			if (hintedTheme !== activePlugins[i] &amp;&amp; &#x27;pencilblue&#x27; !== activePlugins[i]) {
				paths.push(TemplateService.getCustomPath(activePlugins[i], relativePath));
			}
		}
		paths.push(TemplateService.getDefaultPath(relativePath));

		//iterate over paths until a valid template is found
		var i        = 0;
		var doLoop   = true;
		var template = null;
		async.whilst(
			function(){return i &lt; paths.length &amp;&amp; doLoop;},
			function(callback) {

	    		//attempt to load template
	    		TEMPLATE_LOADER.get(paths[i], function(err, templateData){
					template = templateData;
					doLoop   = template === null;
					i++;
					callback();
				});
			},
			function(err) {
				cb(err, template);
			}
		);
	});
};

/**
 * Loads a template file along with any encountered sub-template files and
 * processes any flags.  The call back provides any error encountered and a
 * second parameter that is the transformed content.
 *
 * @method load
 * @param {string}   templateLocation The relative location of the template file.
 * @param {function} cb               Callback function
 */
TemplateService.prototype.load = function(templateLocation, cb) {

	var self = this;
	this.getTemplateContentsByPriority(templateLocation, function(err, templateContents) {
		if (util.isError(err)) {
			cb(err, templateContents);
			return;
		}

		self.process(templateContents, cb);
	});
};

/**
 * Scans the template for flags.  The callback provides any error and a second
 * parameter that is the populated template with any registered flags replaced.
 *
 * @method process
 * @param {string} content The raw content to be inspected for flags
 * @param {function} cb Callback function
 */
TemplateService.prototype.process = function(content, cb) {

	//error checking
	if (typeof content !== &#x27;string&#x27;) {
		cb(new Error(&quot;TemplateService: A valid content string is required in order for the template engine to process the value&quot;), content);
		return;
	}

	//iterate content characters
	var self      = this;
	var rf        = false;
	var flag      = &#x27;&#x27;;

	var cnt = 0;
	var doCallback = function(cb, err, val) {
		if (++cnt % 1000) {
			process.nextTick(function() {cb(err, val);});
		}
		else {
			cb(err, val);
		}
	};
	var getIteratorFunc = function(index) {
		return function(next) {

			var curr = content.charAt(index);
			switch (curr) {

			case &#x27;^&#x27;:
				if (rf) {
					process.nextTick(function() {
						self.processFlag(flag, function(err, subContent) {
							if (pb.log.isSilly()) {
								var str = subContent;
								if (pb.utils.isString(str) &amp;&amp; str.length &gt; 20) {
									str = str.substring(0, 17)+&#x27;...&#x27;;
								}
								pb.log.silly(&quot;TemplateService: Processed flag [%s] Content=[%s]&quot;, flag, str);
							}
							rf   = false;
							flag = &#x27;&#x27;;
							doCallback(next, null, subContent);
						});
					}, 0);
				}
				else {
					rf = true;
					doCallback(next, null, &#x27;&#x27;);
				}
				break;
			default:
				if (rf) {
					flag += curr;
					doCallback(next, null, &#x27;&#x27;);
				}
				else {
					doCallback(next, null, curr);
				}
			}
		};
	};
	var tasks = [];
	for (var i = 0; i &lt; content.length; i++) {
		tasks.push(getIteratorFunc(i));
	};
	async.series(tasks, function(err, contentArray) {
		doCallback(cb, err, contentArray.join(&#x27;&#x27;));
	});
};

/**
 * Called when a flag is encountered by the processing engine.  The function is
 * responsible for delegating out the responsibility of the flag to the
 * registered entity.  Some flags are handled by default (although they can
 * always be overriden locally or globally).  The following flags are considered
 * &quot;baked in&quot; and will be handled automatically unless overriden:
 * &lt;ul&gt;
 * &lt;li&gt;^loc_xyz^ - A localization flag.  When provided, the Localization
 * instance will have its &quot;get&quot; function called in an attempt to retrieve the
 * properly translated value for the key (the part betwee &quot;^loc_&quot; and the ending
 * &quot;^&quot;).
 * &lt;/li&gt;
 * &lt;li&gt;^tmp_somedir=someotherdir=templatefileminusext^ - Specifies a
 * sub-template that should be loaded processed.  The file is expected to have
 * a .html extension.
 * &lt;/li&gt;
 * &lt;/ul&gt;
 *
 * @method processFlag
 * @param {string} flag The flag to be processed. The value should NOT contain
 * the carrot (^) prefix or postfix.
 * @param {function} cb Callback function
 */
TemplateService.prototype.processFlag = function(flag, cb) {
	var self = this;

	//check local
	var doFlagProcessing = function(flag, cb) {
		var tmp;
		if ((tmp = self.localCallbacks[flag]) !== undefined) {//local callbacks
			self.handleReplacement(flag, tmp, cb);
			return;
		}
		else if ((tmp = GLOBAL_CALLBACKS[flag]) !== undefined) {//global callbacks
			self.handleReplacement(flag, tmp, cb);
			return;
		}
		else if (flag.indexOf(LOCALIZATION_PREFIX) == 0 &amp;&amp; self.localizationService) {//localization
			cb(null, self.localizationService.get(flag.substring(LOCALIZATION_PREFIX_LEN)));
			return;
		}
		else if (flag.indexOf(TEMPLATE_PREFIX) == 0) {//sub-templates
			self.handleTemplateReplacement(flag, function(err, template) {
				cb(null, template);
			});
			return;
		}
		else {
			//log result
			if (pb.log.isSilly()) {
				pb.log.silly(&quot;TemplateService: Failed to process flag [%s]&quot;, flag);
			}
			cb(null, &#x27;^&#x27;+flag+&#x27;^&#x27;);
		}
	};
	doFlagProcessing(flag, cb);
};

/**
 * When a sub-template flag is encountered by the processing engine this
 * function is called to parse the flag and delegate out the loading and
 * processing of the sub-template.
 *
 * @method handleTemplateReplacement
 * @param {string} flag The sub-template flag
 * @param {function} cb Callback function
 */
TemplateService.prototype.handleTemplateReplacement = function(flag, cb) {
	var pattern      = flag.substring(TEMPLATE_PREFIX_LEN);
	var templatePath = pattern.replace(/=/g, path.sep);

	if (pb.log.isSilly()) {
		pb.log.silly(&quot;Template Serice: Loading Sub-Template. FLAG=[%s] Path=[%s]&quot;, flag, templatePath);
	}
	this.load(templatePath, function(err, template) {
		cb(err, template);
	});
};

/**
 * Called when the processing engine encounters a non-sub-template flag.  The
 * function delegates the content transformation out to either the locally or
 * globally registered function.  In the event that a value was registered and not
 * a function then the value is used as the second parameter in the callback.
 * During template re-assembly the value will be converted to a string.
 *
 * @method handleReplacement
 * @param {string} flag The flag to transform
 * @param {mixed} replacement The value can either be a function to handle the
 * replacement or a value.
 * @param {function} cb Callback function
 */
TemplateService.prototype.handleReplacement = function(flag, replacement, cb) {
	var self    = this;
	var handler = function(err, content) {

        //check for special condition
        if (content instanceof TemplateValue) {
            content = content.val();
        }
        else if (pb.utils.isObject(content) || pb.utils.isString(content)){//console.log(&#x27;Encoding [&#x27;+(typeof content)+&#x27;] v=&#x27;+content.substring(0, 30));
            content = HtmlEncoder.htmlEncode(content.toString());
        }

		//prevent infinite loops
		if (!this.reprocess || TemplateService.isFlag(content)) {
			cb(err, content);
		}
		else {
			self.process(content, cb);
		}
	};

	//do replacement
	if (typeof replacement === &#x27;function&#x27;) {
		replacement(flag, handler);
	}
	else {
		handler(null, replacement);
	}
};

/**
 * Registers a value or function for the specified
 *
 * @method registerLocal
 * @param {string} flag The flag name to map to the value when encountered in a
 * template.
 * @param {mixed} callbackFunctionOrValue The function to execute to perform the
 * transformation or the value to substitute in place of the flag.
 * @return {Boolean} TRUE when registered successfully, FALSE if not
 */
TemplateService.prototype.registerLocal = function(flag, callbackFunctionOrValue) {
	this.localCallbacks[flag] = callbackFunctionOrValue;
	return true;
};

/**
 * Retrieves the content template names and locations for the active theme.
 *
 * @method getTemplatesForActiveTheme
 * @param {function} cb A call back that provides two parameters: cb(err, [{templateName: templateLocation])
 */
TemplateService.prototype.getTemplatesForActiveTheme = function(cb) {

	pb.settings.get(&#x27;active_theme&#x27;, function(err, activeTheme) {
        if(util.isError(err) || activeTheme == null) {
        	cb(err, []);
        	return;
        }

        //function to retrieve plugin
        var getPlugin = function(uid, callback) {
        	if (uid === &#x27;pencilblue&#x27;) {

        		//load pencilblue plugin
            	var file = pb.PluginService.getDetailsPath(&#x27;pencilblue&#x27;);
            	pb.PluginService.loadDetailsFile(file, function(err, pb) {
            		if (pb) {
            			pb.dirName = &#x27;pencilblue&#x27;;
            		}
            		callback(err, pb);
            	});
        	}
        	else {
        		//load normal plugin
                pb.plugins.getPlugin(activeTheme, callback);
        	}
        };

        //do plugin retrieval
        getPlugin(activeTheme, function(err, plugin) {

        	var templates = [];
        	if (plugin &amp;&amp; plugin.theme &amp;&amp; plugin.theme.content_templates) {

    			for (var j = 0; j &lt; plugin.theme.content_templates.length; j++) {

    				var template = plugin.theme.content_templates[j];
    				templates.push(template);
    			}
    		}
        	cb(err, templates);
        });
    });
};

TemplateService.isFlag = function(content) {
    return pb.utils.isString(content) &amp;&amp; (content.length === 0 || (&#x27;^&#x27;+flag+&#x27;^&#x27;) === content);
};

/**
 * Retrieves the content templates that are available for use to render
 * Articles and pages.
 *
 * @method getAvailableContentTemplates
 * @return {Array} An array of template definitions
 */
TemplateService.getAvailableContentTemplates = function() {
    var templates = pb.PluginService.getActiveContentTemplates();
    templates.push(
        {
            theme_uid: &#x27;pencilblue&#x27;,
            theme_name: &#x27;PencilBlue&#x27;,
            name: &quot;Default&quot;,
            file: &quot;index&quot;
        }
    );
    return templates;
};

/**
 * Registers a value or function for the specified
 *
 * @static
 * @method registerGlobal
 * @param {string} flag The flag name to map to the value when encountered in a
 * template.
 * @param {mixed} callbackFunctionOrValue The function to execute to perform the
 * transformation or the value to substitute in place of the flag.
 * @return {Boolean} TRUE when registered successfully, FALSE if not
 */
TemplateService.registerGlobal = function(key, callbackFunctionOrValue) {
	GLOBAL_CALLBACKS[key] = callbackFunctionOrValue;
	return true;
};

/**
 * Retrieves the default path to a template file based on the assumption that
 * the provided path is relative to the pencilblue/templates/ directory.
 *
 * @static
 * @method getDefaultPath
 * @param {string} templateLocation
 * @return {string} The absolute path
 */
TemplateService.getDefaultPath = function(templateLocation){
	return path.join(DOCUMENT_ROOT, &#x27;templates&#x27;, templateLocation + &#x27;.html&#x27;);
};

/**
 * Retrieves the path to a template file based on the assumption that
 * the provided path is relative to the pencilblue/plugins/[themeName]/templates/ directory.
 *
 * @static
 * @method getCustomPath
 * @param {string} templateLocation
 * @return {string} The absolute path
 */
TemplateService.getCustomPath = function(themeName, templateLocation){
	return path.join(DOCUMENT_ROOT, &#x27;plugins&#x27;, themeName, &#x27;templates&#x27;, templateLocation + &#x27;.html&#x27;);
};

function TemplateValue(val, htmlEncode){

    this.raw        = val;
    this.htmlEncode = pb.utils.isBoolean(htmlEncode) ? htmlEncode : true;
};

TemplateValue.prototype.encode = function(doHtmlEncoding) {
    if (doHtmlEncoding == true || doHtmlEncoding == false) {
        this.htmlEncode = doHtmlEncoding;
    }
    return this.htmlEncode;
};

TemplateValue.prototype.skipEncode = function() {
    this.enocde(false);
};

TemplateValue.prototype.doEncode = function() {
    this.encode(true);
};

TemplateValue.prototype.val = function() {
    var val = this.raw;
    if (this.encode()) {//console.log(&#x27;TVEncoding [&#x27;+(typeof val)+&#x27;] v=&#x27;+val.substring(0, 30));
        val = HtmlEncoder.htmlEncode(this.raw);
    }//else{console.log(&#x27;TV Not Encoding&#x27;);}
    return val;
};

TemplateValue.prototype.toString = function() {
    return this.val();
}

//exports
module.exports.TemplateService = TemplateService;
module.exports.TemplateValue   = TemplateValue;

    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
